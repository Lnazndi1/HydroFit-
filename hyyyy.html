<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HydroFit</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
/* خطوط وألوان */
body {
  font-family: 'Cairo', sans-serif;
  margin: 0;
  background: linear-gradient(to bottom, #e0f2ff, #021124);
  color: #021124;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background-color: #021124;
  color: white;
  flex-wrap: wrap;
}
header h2 { margin: 0; }
header nav {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}
header nav a, header nav button {
  color: white;
  text-decoration: none;
  margin-left: 0;
  font-weight: 600;
  background: none;
  border: none;
  cursor: pointer;
}
header nav a:hover, header nav button:hover { color: #0a95d1; }
button.action-btn {
  background: #0a95d1;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 16px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease;
}
button.action-btn:hover { background: #0782b8; }
button.action-btn:active { background: #05668d; }

.container { max-width: 900px; margin: 20px auto; padding: 20px; }
.page { display: none; }
.page.active { display: block; }

/* الفورم */
.form-box {
  background: white;
  padding: 20px;
  border-radius: 12px;
  width: 320px;
  margin: 20px auto;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}
.form-box h2 { text-align: center; margin-bottom: 20px; }
.input-box { margin-bottom: 15px; position: relative; }
.input-box input { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; outline: none; }
.input-box label { position: absolute; top: 10px; left: 12px; font-size: 14px; color: #666; pointer-events: none; transition: 0.3s; }
.input-box input:focus + label,
.input-box input:not(:placeholder-shown) + label { top: -8px; left: 10px; font-size: 12px; color: #0a95d1; }
.toggle-text { margin-top: 12px; text-align: center; font-size: 14px; }
.toggle-text a { color: #0a95d1; cursor: pointer; text-decoration: none; }

/* الصفحة الرئيسية */
.account-box { margin: 40px auto; max-width: 400px; padding: 20px; background: #f0f4f8; border-radius: 12px; text-align: center; }
.account-box img { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-bottom: 10px; }
.account-box div { margin: 8px 0; }

/* كوب الماء */
.cup-wrap {
  position: relative;
  width: 140px;
  height: 320px;
  border: 3px solid #021124;
  border-radius: 12px;
  overflow: hidden;
  background: white;
}
.cup-water {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 0%;
  background: #0a95d1;
  transition: height 1s ease;
}
.cup-water::before {
  content:"";
  position: absolute;
  top: -20px;
  left: 0;
  width: 200%;
  height: 40px;
  background: rgba(255,255,255,0.4);
  border-radius: 50%;
  animation: wave 3s infinite linear;
}
@keyframes wave { from {transform: translateX(0);} to {transform: translateX(-50%);} }
.cup-percent { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 26px; font-weight: bold; color: #00345c; pointer-events: none; }

/* آراء المستخدمين */
.review-box { max-width: 400px; margin: 20px auto; background: #f0f4f8; color: #021124; padding: 12px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); }
.review-box textarea { width:100%; padding:8px; border-radius:8px; border:1px solid #ccc; resize:none; }
#stars { margin: 8px 0; font-size: 24px; cursor: pointer; color: #ccc; display: flex; gap: 4px; justify-content: flex-start; }
#reviewsList div { background: #fff; padding: 8px; margin-bottom: 8px; border-radius: 8px; text-align: right; }

/* responsive */
@media screen and (max-width:600px){
  .cup-wrap { width: 100px; height: 240px; }
  .cup-percent { font-size: 20px; }
  .form-box { width: 90%; }
}
</style>
</head>
<body>
  <header>
  <h2>HydroFit</h2>
  <nav>
    <a href="#" data-page="loginPage" class="nav-link">Login</a>
    <a href="#" data-page="registerPage" class="nav-link">Register</a>
    <a href="#" data-page="homePage" class="nav-link">Home</a>
    <a href="#" data-page="analysisPage" class="nav-link">Analysis</a>
    <a href="#" data-page="reviewsPage" class="nav-link">Reviews</a>
    <a href="#" data-page="aboutPage" class="nav-link">About</a>
    <button id="langBtn">EN/AR</button>
  </nav>
</header>

<!-- صفحات -->
<div class="page active" id="loginPage">
  <div class="form-box">
    <h2 data-ar="تسجيل الدخول" data-en="Login">تسجيل الدخول</h2>
    <div class="input-box">
      <input type="email" id="loginEmail" placeholder=" " required>
      <label data-ar="البريد الإلكتروني" data-en="Email">البريد الإلكتروني</label>
    </div>
    <div class="input-box">
      <input type="password" id="loginPassword" placeholder=" " required>
      <label data-ar="كلمة المرور" data-en="Password">كلمة المرور</label>
    </div>
    <button id="loginBtn" class="action-btn" data-ar="دخول" data-en="Login">دخول</button>
    <div class="toggle-text" data-ar="لا تمتلك حساب؟" data-en="Don't have account?">
      لا تمتلك حساب؟ <a id="showRegister">أنشئ حساب الآن</a>
    </div>
    <div class="toggle-text" data-ar="نسيت كلمة المرور؟" data-en="Forgot password?">
      <a id="forgotPassword">نسيت كلمة المرور؟</a>
    </div>
  </div>
</div>

<div class="page" id="registerPage">
  <div class="form-box">
    <h2 data-ar="إنشاء حساب" data-en="Register">إنشاء حساب</h2>
    <div class="input-box">
      <input type="text" id="regName" placeholder=" " required>
      <label data-ar="اسم المستخدم" data-en="Username">اسم المستخدم</label>
    </div>
    <div class="input-box">
      <input type="email" id="regEmail" placeholder=" " required>
      <label data-ar="البريد الإلكتروني" data-en="Email">البريد الإلكتروني</label>
    </div>
    <div class="input-box">
      <input type="password" id="regPassword" placeholder=" " required>
      <label data-ar="كلمة المرور" data-en="Password">كلمة المرور</label>
    </div>
    <button id="registerBtn" class="action-btn" data-ar="إنشاء حساب" data-en="Register">إنشاء حساب</button>
    <div class="toggle-text" data-ar="لديك حساب بالفعل؟" data-en="Already have account?">
      لديك حساب بالفعل؟ <a id="showLogin">سجل الدخول</a>
    </div>
  </div>
</div>

<div class="page" id="homePage">
  <div class="account-box">
    <img id="profilePic" src="default.png" alt="Profile">
    <div><b data-ar="اسم المستخدم:" data-en="Username:">اسم المستخدم:</b> <span id="displayUsername">--</span></div>
    <div><b data-ar="البريد الإلكتروني:" data-en="Email:">البريد الإلكتروني:</b> <span id="displayEmail">--</span></div>
  </div>
</div>

<div class="page" id="analysisPage">
  <h2 data-ar="تحليل الماء اليوم" data-en="Daily Water Analysis">تحليل الماء اليوم</h2>
  <div style="display:flex;justify-content:space-between;margin-top:20px;flex-wrap:wrap;">
    <div class="cup-wrap">
      <div class="cup-water" id="cupWater"></div>
      <div class="cup-percent" id="cupPercent">0%</div>
    </div>
    <div>
      <div data-ar="هدف اليوم:" data-en="Daily Goal:">هدف اليوم: <span id="dailyGoalDisplay">0 L</span></div>
      <div data-ar="شربت:" data-en="Drank:">شربت: <span id="currentIntake">0</span> لتر</div>
      <div data-ar="كمية الماء في الزجاجة:" data-en="Bottle Level:">كمية الماء في الزجاجة: <span id="bottleLevel">2000</span> ml</div>
      <div data-ar="TDS:" data-en="TDS:">TDS: <span id="tdsValue">---</span> ppm</div>
      <div data-ar="درجة الحرارة:" data-en="Temperature:">درجة الحرارة: <span id="tempValue">--</span> °C</div>
    </div>
  </div>
  <div style="margin-top:15px">
    <button id="drinkSmall" class="action-btn" data-ar="اشرب كوب صغير (100ml)" data-en="Drink Small (100ml)">اشرب كوب صغير (100ml)</button>
    <button id="drinkLarge" class="action-btn" data-ar="اشرب كوب كبير (250ml)" data-en="Drink Large (250ml)">اشرب كوب كبير (250ml)</button>
<button id="reset" class="action-btn" data-ar="إعادة ضبط" data-en="Reset">إعادة ضبط</button>
</div>
</div>

<div class="page" id="reviewsPage">
  <div class="review-box">
    <div style="margin-bottom:8px; font-weight:bold;" id="reviewUser"></div>
    <textarea id="reviewText" placeholder="اكتب رأيك هنا..." rows="3"></textarea>
    <div id="stars">
      <span data-value="1">★</span>
      <span data-value="2">★</span>
      <span data-value="3">★</span>
      <span data-value="4">★</span>
      <span data-value="5">★</span>
    </div>
    <button onclick="submitReview()" class="action-btn" data-ar="إرسال" data-en="Submit">إرسال</button>
  </div>
  <div id="reviewsList"></div>
</div>

<div class="page" id="aboutPage">
  <div class="container">
    <h2 data-ar="من نحن" data-en="About Us">من نحن</h2>
    <p data-ar="نحن فريق يهدف..." data-en="We are a team aiming...">
      نحن فريق يهدف إلى تحسين نمط الحياة الصحي من خلال تقنيات ذكية ومبتكرة. الزجاجة الذكية التي نقدمها ليست مجرد وعاء للماء، بل هي رفيق يومي يراقب استهلاكك للماء ويحفزك على شرب الكمية المناسبة لجسمك.
    </p>
  </div>
</div>

<script>
  // لغة الموقع
  let currentLang = "ar";
  document.getElementById("langBtn").onclick = () => {
    currentLang = currentLang === "ar" ? "en" : "ar";
    // نحاول نقرأ dataset.ar/dataset.en بشكل آمن
    document.querySelectorAll("[data-ar]").forEach(el => {
      const val = el.dataset ? el.dataset[currentLang] : null;
      if (val !== undefined && val !== "") el.textContent = val;
    });
  };
  
  // التنقل بين الصفحات
  document.querySelectorAll(".nav-link").forEach(link => {
    link.addEventListener("click", e => {
      e.preventDefault();
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      const target = link.dataset.page;
      if (target && document.getElementById(target)) document.getElementById(target).classList.add("active");
    });
  });
  
  // تسجيل وإنشاء حساب
  document.getElementById("showRegister").onclick = () => {
    document.getElementById("loginPage").classList.remove("active");
    document.getElementById("registerPage").classList.add("active");
  };
  document.getElementById("showLogin").onclick = () => {
    document.getElementById("registerPage").classList.remove("active");
    document.getElementById("loginPage").classList.add("active");
  };
  document.getElementById("registerBtn").onclick = () => {
    const name = document.getElementById("regName").value.trim();
    const email = document.getElementById("regEmail").value.trim();
    const pass = document.getElementById("regPassword").value;
    // ⚠️ تم تصحيح شرط التحقق هنا
    if (!name || !email || !pass) { alert("اكمل كل الحقول"); return; }
    localStorage.setItem("user", JSON.stringify({ name, email, pass }));
    alert("تم إنشاء الحساب بنجاح! يمكنك تسجيل الدخول الآن.");
    document.getElementById("showLogin").click();
  };
  document.getElementById("loginBtn").onclick = () => {
    const email = document.getElementById("loginEmail").value.trim();
    const pass = document.getElementById("loginPassword").value;
    const user = JSON.parse(localStorage.getItem("user") || "null");
    if (!user) { alert("لا يوجد حساب مسجل"); return; }
    if (user.email === email && user.pass === pass) {
      // ⚠️ تم تصحيح جملة التنبيه هنا (كانت تسبّب Syntax Error)
      alert(`مرحباً ${user.name}! تم تسجيل الدخول بنجاح.`);
      document.getElementById("loginPage").classList.remove("active");
      document.getElementById("homePage").classList.add("active");
      document.getElementById("displayUsername").textContent = user.name;
      document.getElementById("displayEmail").textContent = user.email;
    } else alert("البريد الإلكتروني أو كلمة المرور غير صحيحة.");
  };
  
  // Forget Password
  document.getElementById("forgotPassword").onclick = () => {
    const email = prompt("أدخل بريدك الإلكتروني لإعادة تعيين كلمة المرور:");
    const user = JSON.parse(localStorage.getItem("user") || "null");
    if (user && email === user.email) {
      const newPass = prompt("أدخل كلمة المرور الجديدة:");
      if (newPass) {
        user.pass = newPass;
        localStorage.setItem("user", JSON.stringify(user));
        alert("تم تحديث كلمة المرور بنجاح!");
      } else alert("لم يتم إدخال كلمة مرور جديدة.");
    } else alert("البريد الإلكتروني غير موجود.");
  };
  // كوب الماء والتحليل
let STATE={dailyGoal:2,intake:0,bottle:2000,tds:200,temp:22};
function renderCup(){
  // حماية من القسمة على صفر
  const goal = STATE.dailyGoal > 0 ? STATE.dailyGoal : 1;
  let percent=Math.min((STATE.intake/goal)*100,100);
  document.getElementById("cupWater").style.height=percent+"%";
  document.getElementById("cupPercent").textContent=Math.floor(percent)+"%";
  document.getElementById("currentIntake").textContent=STATE.intake.toFixed(2);
  document.getElementById("bottleLevel").textContent=STATE.bottle;
}
document.getElementById("drinkSmall").onclick=()=>{if(STATE.bottle>=100){STATE.intake+=0.1;STATE.bottle-=100;renderCup();}};
document.getElementById("drinkLarge").onclick=()=>{if(STATE.bottle>=250){STATE.intake+=0.25;STATE.bottle-=250;renderCup();}};
document.getElementById("reset").onclick=()=>{STATE.intake=0;STATE.bottle=2000;renderCup();};
setInterval(()=>{STATE.temp=Math.round((STATE.temp+(Math.random()-0.5)*0.2)*10)/10;STATE.tds=Math.round(150+Math.random()*150);document.getElementById("tempValue").textContent=STATE.temp;document.getElementById("tdsValue").textContent=STATE.tds;},2000);

// آراء المستخدمين
const userObj = JSON.parse(localStorage.getItem("user")||'{"name":"زائر"}');
const currentUser = userObj.name || "زائر";
document.getElementById("reviewUser").textContent='اسم المستخدم: '+currentUser;
const stars=document.querySelectorAll("#stars span");
let currentRating=0;
stars.forEach(star=>{
  star.addEventListener("mouseover",()=>highlightStars(parseInt(star.dataset.value)));
  star.addEventListener("mouseout",()=>highlightStars(currentRating));
  star.addEventListener("click",()=>{currentRating=parseInt(star.dataset.value);highlightStars(currentRating);});
});
function highlightStars(r){stars.forEach(s=>s.style.color=(parseInt(s.dataset.value)<=r)?"gold":"#ccc");}
function loadReviews(){const reviews=JSON.parse(localStorage.getItem("reviews")||'[]');const container=document.getElementById("reviewsList");container.innerHTML='';reviews.slice().reverse().forEach(r=>{const div=document.createElement("div");div.textContent=r.user+': '+r.text+' ('+r.rating+'★)';container.appendChild(div);});}
function submitReview(){const text=document.getElementById("reviewText").value.trim();if(!text){alert("اكتب رأيك!");return;}const reviews=JSON.parse(localStorage.getItem("reviews")||'[]');reviews.push({user:currentUser,text,rating:currentRating});localStorage.setItem("reviews",JSON.stringify(reviews));document.getElementById("reviewText").value='';currentRating=0;highlightStars(0);loadReviews();}
loadReviews();
renderCup();
</script>

</body>
</html>